<!DOCTYPE html>
<html>
<head>
  	<title>Management</title>
	


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
        <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>



	<script src="js/Management.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places"></script>
	  <link rel="stylesheet" href="css/style.css">
</head>
<body>

	<h1 style="display:block; text-align:center;" >Beheer pagina</h1>
	<p style="display:block; text-align:center;" > U bent ingelogd als (Fullname User)</p>
  	<p align="center">Welkom op de beheer pagina, hier kunnen races bekeken, aangemaakt, gewijzigd en verwijderd worden.</p>

  	<div data-role="tabs" id="tabs">
	  <div data-role="navbar">
	    <ul>
	      <li><a href="#one" data-ajax="false">Races</a></li>
	      <li><a href="#two" data-ajax="false">Aanmaken</a></li>
	      <li><a href="crud/read.html" data-ajax="false">Aanpassen</a></li>
	      <li><a href="#four" data-ajax="false">Verwijderen</a></li>
	    </ul>
	  </div>
	  <div id="two" class="ui-body-d ui-content">
	    <ul id="listview" data-role="listview" data-inset="true">
	       
	    </ul>
	  </div>
	  <div id="one">
	    <p><input type="text" name="name" value="" placeholder="Naam"></p>
        <p><input type="text" name="description" value="" placeholder="Beschrijving"></p>
        <select>
        	<option value="Open">Open</option>
        	<option value="Closed">Closed</option>
        </select>
        <h3 style="text-align:center; background-color: #D0F5F3"> Huidige Waypoints</h3>


        <ul id="waypoints" data-role="listview" data-inset="true">
	       <li>Waypoint 1 test</li>
	       <li>Waypoint 2 test</li>
	    </ul>
	   	<h3 style="text-align:center; background-color: #D0F5F3"> Zoeken naar Waypoints</h3>

	   	<p>
	   		<input type="text" id="pac-input" name="name" value="" placeholder="Zoekterm">
	   	</p>


	   	<h3 style="text-align:center; background-color: #D0F5F3"> Resultaten</h3>
        <ul id="resultpoints" data-role="listview" data-inset="true">
	       <li>Zoek waypoint 1</li>
	       <li>Zoek waypoint 2</li>
	    </ul>

        <p class="submit"><input type="submit" name="commit" value="Voeg race toe"></p>
	  </div>

	  <div id="four">
	  	<h3>Race verwijderen</h3>

	  </div>
	</div>
</body>

<script type="text/javascript">

	$(document).ready(function()
	{
		//section Races Read
		getAllRaces(function(races)
		{
			for(var race in races)
			{
				if(races[0].status == "Open")
				{
					$("#listview").append('<li>' + races[0].name + ' - ' + races[0].description + ' <span style="float:right;"> Waypoints : ' + races[0].waypoints.length + ' |  Status : ' + races[0].status + '</span></li>');
				}
			}
			$("#listview").listview("refresh");
		});
		//---------------------
		//section Races Create
		getGoogleMapsGeo();
		function getGoogleMapsGeo()
		{
			//var searchBox = new google.maps.places.SearchBox(input);
			var input = /** @type {HTMLInputElement} */(
	      	document.getElementById('pac-input'));
	  		var searchBox = new google.maps.places.SearchBox(
	    	/** @type {HTMLInputElement} */(input));
	  		google.maps.event.addListener(searchBox, 'places_changed', function() {

	  			  var places = searchBox.getPlaces();
	  			  if (places.length == 0) {
				      return;
				  }
				  var place = places[0];
				  loadWaypoints(place.geometry.location);
			});
  		}
  		function loadWaypoints(GEO)
  		{
  			$("#resultpoints").empty();
  			var URI = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?key=AIzaSyBiRwy-lPEwPJkfOOG0XPpeT_OCG88Ust8&location=51.892747,%205.293556&radius=5000&type=cafe";

  			getJSONFromURL(URI, function(response)
  			{
  				alert(response);
  				$("#resultpoints").listview("refresh");
  			});
  		}
		});

</script>

</html>